# 设备管理功能使用指南

## 概述
Flow Farm员工客户端的设备管理模块允许您连接和管理最多10台Android设备，用于执行自动化任务。本指南将详细介绍如何使用设备管理功能。

## 前置条件

### 1. 安装ADB
- **Windows用户**：
  1. 下载Android SDK Platform Tools
  2. 将ADB路径添加到系统环境变量
  3. 在命令行中运行 `adb version` 验证安装

- **自动检测**：应用会自动尝试找到以下路径中的ADB：
  - `C:\Users\%USERNAME%\AppData\Local\Android\Sdk\platform-tools\adb.exe`
  - `D:\Android\sdk\platform-tools\adb.exe`
  - `%ANDROID_HOME%\platform-tools\adb.exe`

### 2. 设备设置
- 在Android设备上开启"开发者选项"
- 启用"USB调试"
- 连接设备到电脑via USB线

## 界面介绍

### 主界面布局
```
[Flow Farm 员工客户端]                    [用户信息] [退出登录]
┌─────────────────────────────────────────────────────────────────┐
│ [设备管理] [任务管理] [工作统计] [系统设置]                      │
├─────────────────────────────────────────────────────────────────┤
│ 🔌 设备管理                        [🔄刷新设备] [🛠️检查ADB]    │
│                                                                 │
│ [ADB状态指示器]                                                 │
│                                                                 │
│ 连接的设备 (2/10)          可用:2  已连接:1                   │
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│ │   设备1     │ │   设备2     │ │   设备3     │              │
│ │   已连接    │ │   可连接    │ │   离线      │              │
│ └─────────────┘ └─────────────┘ └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
```

### ADB状态指示器
- 🟢 **ADB连接正常**：可以正常使用设备管理功能
- 🔴 **ADB未安装或不可用**：需要安装或配置ADB
- 🟡 **检查ADB连接状态...**：正在检测ADB状态

### 设备统计
- **连接的设备 (X/10)**：当前检测到的设备数量，最大支持10台
- **可用**：状态为"可连接"的设备数量
- **已连接**：已成功连接并可执行任务的设备数量

## 设备状态说明

### 设备卡片信息
每个设备卡片显示：
- **设备编号**：自动分配的编号（1-10）
- **状态标识**：颜色编码的状态指示
- **设备ID**：唯一标识符
- **设备型号**：硬件型号信息
- **Android版本**：操作系统版本
- **电量信息**：当前电量百分比（如果可用）
- **操作按钮**：连接/断开、查看详情

### 状态类型
1. **🟢 已连接**：设备已连接并可执行任务
2. **🔵 可连接**：设备已检测到，可以连接
3. **🔴 离线**：设备断开连接或不可用
4. **🟡 未授权**：设备需要在手机上确认USB调试授权

## 操作指南

### 1. 启动和初始化
1. 启动Flow Farm员工客户端
2. 完成登录后，点击"设备管理"标签页
3. 系统会自动检查ADB状态并扫描设备

### 2. 检查ADB状态
- 点击页面右上角的"🛠️ 检查ADB"按钮
- 系统会验证ADB是否正确安装和配置
- 如果显示红色状态，请检查ADB安装

### 3. 刷新设备列表
- 点击"🔄 刷新设备"按钮扫描新连接的设备
- 或者点击空状态页面中的"🔍 扫描设备"按钮
- 系统会显示扫描进度和结果通知

### 4. 连接设备
1. 确保设备已通过USB连接到电脑
2. 在设备卡片上点击"连接"按钮
3. 首次连接时，手机上会弹出USB调试授权确认
4. 在手机上点击"确定"或"总是允许这台计算机"
5. 连接成功后，设备状态会变为"已连接"

### 5. 断开设备
- 在已连接的设备卡片上点击"断开连接"按钮
- 设备状态会变回"可连接"状态
- 注意：断开连接不会影响正在运行的任务

### 6. 查看设备详情
- 点击任何设备卡片上的"详情"按钮
- 系统会显示完整的设备信息，包括：
  - 设备ID和名称
  - 硬件型号和制造商
  - Android版本详细信息
  - 屏幕分辨率
  - 电量状态
  - 最后检测时间

## 常见问题和解决方案

### 问题1：ADB状态显示"不可用"
**解决方案**：
1. 确认ADB已正确安装
2. 检查环境变量PATH中是否包含ADB路径
3. 在命令行中运行 `adb version` 测试
4. 重启应用并重新检查

### 问题2：设备显示"未授权"状态
**解决方案**：
1. 检查手机屏幕是否有USB调试授权弹窗
2. 在手机上选择"确定"或"总是允许"
3. 如果没有弹窗，尝试断开并重新连接USB
4. 刷新设备列表

### 问题3：无法检测到设备
**解决方案**：
1. 确认USB线连接正常
2. 检查手机是否开启了"开发者选项"和"USB调试"
3. 尝试更换USB端口或数据线
4. 在手机上重新授权USB调试
5. 点击"刷新设备"按钮

### 问题4：设备突然离线
**解决方案**：
1. 检查USB连接是否松动
2. 查看手机是否进入休眠状态
3. 确认手机电量是否充足
4. 刷新设备列表重新检测

### 问题5：连接设备失败
**解决方案**：
1. 确保设备状态显示为"可连接"
2. 检查是否已达到10台设备的上限
3. 重启ADB服务：在命令行运行 `adb kill-server && adb start-server`
4. 重新刷新设备列表

## 最佳实践

### 设备管理建议
1. **设备标识**：为每台设备贴上编号标签，方便识别
2. **USB线质量**：使用高质量的USB数据线，避免连接不稳定
3. **电源管理**：确保设备有足够电量或连接充电器
4. **定期检查**：每天开始工作前检查设备连接状态

### 性能优化
1. **设备数量**：根据计算机性能和网络状况适量连接设备
2. **资源监控**：关注CPU和内存使用情况
3. **任务分配**：合理分配任务到不同设备避免过载

### 安全注意事项
1. **授权管理**：定期检查USB调试授权设备列表
2. **网络安全**：在安全的网络环境中使用
3. **数据保护**：确保设备中没有重要个人数据

## 技术支持

如果遇到问题无法解决，请提供以下信息：
- 操作系统版本
- ADB版本信息
- 设备型号和Android版本
- 错误消息截图
- 详细的操作步骤

联系技术支持获取进一步帮助。

---

**注意**：本指南基于当前版本功能编写，后续版本可能会有界面和功能更新。
