# Flow Farm 任务管理界面使用指南

## 🎯 功能概览

全新的任务管理界面重点提供**通讯录导入**和**同行监控**两大核心功能，支持小红书和抖音平台，具备完整的余额管理和任务分配系统。

## 🚀 快速开始

### 启动界面
```bash
cd d:\repositories\Flow_Farm\employee-client
python src/main.py --gui --debug
```

### 界面布局
- **顶部**: 账户余额显示 💰
- **平台选择**: 小红书 📖 / 抖音 🎵 切换
- **主功能区**: 通讯录导入 📇 | 同行监控 🔍
- **状态监控**: 任务执行状态 📊

## 📇 通讯录导入详细使用

### 1. 准备通讯录文件

#### 支持格式
- **CSV文件** (.csv) - 推荐格式
- **Excel文件** (.xlsx/.xls)
- **文本文件** (.txt) - 简单格式

#### 文件格式示例

**CSV格式**:
```csv
用户名,用户ID,手机号,邮箱,备注
张三,zhang_san_001,13800138001,zhangsan@example.com,重点客户
李四,li_si_002,13900139002,lisi@example.com,普通客户
王五,wang_wu_003,13700137003,wangwu@example.com,VIP客户
```

**Excel格式**:
| 用户名 | 用户ID | 手机号 | 邮箱 | 备注 |
|--------|--------|--------|------|------|
| 张三 | zhang_san_001 | 13800138001 | zhangsan@example.com | 重点客户 |
| 李四 | li_si_002 | 13900139002 | lisi@example.com | 普通客户 |

**TXT格式**:
```txt
张三
李四
王五
赵六
```

#### 字段说明
- **用户名** (必需): 目标用户的昵称或用户名
- **用户ID** (可选): 平台用户ID
- **手机号** (可选): 联系电话
- **邮箱** (可选): 电子邮箱
- **备注** (可选): 用户标签或备注信息

### 2. 导入操作步骤

#### 步骤 1: 选择平台
- 点击 **📖 小红书** 或 **🎵 抖音** 按钮
- 查看当前扣费标准显示

#### 步骤 2: 选择文件
- 点击 **📁 浏览文件** 按钮
- 选择准备好的通讯录文件
- 系统自动分析文件内容

#### 步骤 3: 查看预览
- 文件选择后，系统显示: "📊 检测到 X 条联系人数据"
- 确认数据格式正确

#### 步骤 4: 导入数据
- 点击 **📤 导入通讯录** 按钮
- 系统处理文件，显示导入结果:
  ```
  ✅ 已导入 20 条有效数据，去重 2 条，待分配关注任务
  ```

#### 步骤 5: 配置任务
- **选择设备**: 从下拉菜单选择执行设备
- **设置数量**: 调整关注数量 (1-1000)
- **查看费用**: 实时显示预计费用

#### 步骤 6: 提交任务
- 确认余额充足 (绿色显示)
- 点击 **🚀 提交关注任务** 按钮
- 系统自动扣费并启动任务

### 3. 错误处理

#### 文件格式错误
- **问题**: "不支持的文件格式"
- **解决**: 确保文件扩展名为 .csv, .xlsx, .xls, .txt

#### 数据格式错误
- **问题**: "未找到有效的用户名字段"
- **解决**: 检查文件第一行是否包含标题，确保有用户名列

#### 余额不足
- **问题**: 费用显示红色，提交时提示余额不足
- **解决**: 联系管理员充值或减少关注数量

#### 设备未连接
- **问题**: "请先连接设备"
- **解决**: 启动模拟器或连接真实设备

## 🔍 同行监控功能

### 当前状态
- **开发中**: 🚧 功能开发中...
- **预留功能**: 界面已就绪，等待功能实现

### 计划功能
- 监控同行账号动态
- 自动分析竞品策略
- 智能推荐优化方案

## 💰 余额管理

### 余额显示
- 界面右上角显示当前账户余额
- 格式: `💰 账户余额: ¥1,250.00`

### 扣费规则
- **小红书关注**: ¥0.12/次
- **抖音关注**: ¥0.15/次
- **实时计算**: 数量 × 单价 = 总费用

### 余额检查
- **充足余额**: 费用显示绿色
- **余额不足**: 费用显示红色背景
- **提交限制**: 余额不足时无法提交任务

## 📊 任务状态监控

### 状态类型
- **🟢 运行中**: 任务正在执行，显示实时进度
- **🔴 队列中**: 任务等待执行
- **⚪ 已完成**: 任务执行完成

### 操作控制
- **⏸️ 暂停**: 暂停运行中的任务
- **▶️ 开始**: 启动队列中的任务
- **✅ 完成**: 已完成任务(不可操作)

### 进度监控
- 实时进度条显示完成百分比
- 显示执行设备信息
- 任务名称和状态标识

## 🛠️ 故障排除

### 常见问题

#### 1. 界面无法启动
```bash
# 检查依赖
pip install -r requirements.txt

# 重新启动
python src/main.py --gui --debug
```

#### 2. 文件导入失败
- 检查文件路径是否正确
- 确认文件未被其他程序占用
- 验证文件格式和编码 (推荐UTF-8)

#### 3. 设备连接问题
- 确保ADB工具正常工作
- 检查模拟器是否启动
- 查看设备管理界面的设备状态

#### 4. 任务提交失败
- 检查网络连接到服务器
- 确认用户权限
- 查看系统日志获取详细错误信息

### 日志查看
```bash
# 查看详细日志
python src/main.py --gui --debug
```

### 技术支持
如遇到问题，请查看:
- 终端输出的错误信息
- `logs/` 目录下的日志文件
- 界面上的状态提示

## 📝 最佳实践

### 通讯录文件准备
1. **统一格式**: 建议使用CSV格式，确保兼容性
2. **数据清理**: 提前清理重复和无效数据
3. **分批处理**: 大量数据建议分批导入
4. **备份文件**: 保留原始文件备份

### 任务执行策略
1. **设备分配**: 根据设备性能分配合适的任务量
2. **时间规划**: 避免高峰期执行大量任务
3. **监控状态**: 定期检查任务执行状态
4. **余额管理**: 提前充值，确保任务顺利执行

### 平台选择建议
- **小红书**: 适合女性用户群体，关注成本较低
- **抖音**: 用户基数大，关注成本相对较高
- **策略选择**: 根据目标用户群体选择合适平台

---

**使用愉快！** 🎉

如有问题或建议，欢迎反馈。新功能将持续更新，敬请期待！
