# TaskFleet é¡¹ç›®ä¼˜åŒ–è·¯çº¿å›¾

> **é¡¹ç›®æ„¿æ™¯**: ä¸“æ³¨äºä»»åŠ¡åˆ†å‘ã€è¿›åº¦ç›‘æ§å’Œæ•°æ®ç»Ÿè®¡çš„å¼€æºé¡¹ç›®ç®¡ç†ç³»ç»Ÿ

**åˆ›å»ºæ—¥æœŸ**: 2025å¹´10æœˆ28æ—¥  
**æ–‡æ¡£ç›®çš„**: æä¾›å®Œæ•´çš„TaskFleeté¡¹ç›®ä¼˜åŒ–å®æ–½æŒ‡å—  
**é¢„è®¡å®Œæˆæ—¶é—´**: 9-15å¤©

---

## ğŸ“Š ç°çŠ¶åˆ†æ

### âœ… å·²å®Œæˆçš„å·¥ä½œ
- [x] æ–‡æ¡£ç³»ç»Ÿå®Œå…¨æ¸…ç†ï¼Œç§»é™¤Flow Farmè¿‡æ—¶å†…å®¹
- [x] å»ºç«‹æ¸…æ™°çš„TaskFleetæŠ€æœ¯æ¶æ„æ–‡æ¡£  
- [x] ç¡®å®šæ ¸å¿ƒå®šä½ï¼šä»»åŠ¡åˆ†å‘ã€è¿›åº¦ç›‘æ§ã€æ•°æ®ç»Ÿè®¡
- [x] åˆ›å»ºç°ä»£åŒ–çš„æ–‡æ¡£å¯¼èˆªç³»ç»Ÿ

### âŒ å½“å‰å­˜åœ¨çš„é—®é¢˜
1. **åç«¯ä»£ç æ··ä¹±** - ä»æœ‰Flow Farmæ—¶æœŸçš„è®¡è´¹ã€è®¾å¤‡ç®¡ç†ç­‰æ— å…³ä»£ç 
2. **ç¼ºå°‘æ ¸å¿ƒåŠŸèƒ½** - æ²¡æœ‰ä»»åŠ¡ç®¡ç†ã€é¡¹ç›®ç®¡ç†çš„å®é™…å®ç°
3. **å‰ç«¯ä¸åŒ¹é…** - å¯èƒ½è¿˜æ˜¯Flow Farmçš„ç•Œé¢ï¼Œæœªä½“ç°TaskFleetå®šä½
4. **æ¡Œé¢å®¢æˆ·ç«¯å®šä½ä¸æ¸…** - æœªä¸“æ³¨äºå‘˜å·¥ä»»åŠ¡æ‰§è¡Œåœºæ™¯
5. **æ•°æ®æ¨¡å‹è¿‡æ—¶** - Useræ¨¡å‹åŒ…å«è®¡è´¹ç­‰æ— å…³å­—æ®µ

---

## ğŸ¯ æ€»ä½“ä¼˜åŒ–ç­–ç•¥

### æ ¸å¿ƒåŸåˆ™
1. **ä¸“æ³¨æ€§** - åªä¿ç•™ä¸ä»»åŠ¡åˆ†å‘ã€ç›‘æ§ã€ç»Ÿè®¡ç›¸å…³çš„åŠŸèƒ½
2. **ç®€æ´æ€§** - åˆ é™¤æ‰€æœ‰Flow Farmé—ç•™çš„å¤æ‚é€»è¾‘
3. **å®ç”¨æ€§** - æ¯ä¸ªåŠŸèƒ½éƒ½è¦è§£å†³å®é™…çš„ä»»åŠ¡ç®¡ç†é—®é¢˜
4. **ä¸€è‡´æ€§** - å‰åç«¯ã€æ–‡æ¡£ã€ä»£ç éƒ½è¦ä½“ç°TaskFleetå®šä½

### æŠ€æœ¯æ¶æ„ç›®æ ‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TaskFleet ä»»åŠ¡æ‰§è¡Œä¸“å®¶                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ç®¡ç†ç«¯ (Web)     â”‚  ğŸ’» å‘˜å·¥ç«¯ (Desktop)              â”‚
â”‚  React + TypeScript  â”‚  Tauri + Rust                    â”‚
â”‚  - ä»»åŠ¡æ‰¹é‡å¯¼å…¥       â”‚  - æ¥æ”¶ä»»åŠ¡é€šçŸ¥                   â”‚
â”‚  - è¿›åº¦å®æ—¶ç›‘æ§       â”‚  - æ›´æ–°ä»»åŠ¡çŠ¶æ€                   â”‚
â”‚  - æ•°æ®ç»Ÿè®¡åˆ†æ       â”‚  - è®°å½•å·¥ä½œæ—¶é—´                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ğŸ”§ åç«¯æœåŠ¡ (Rust + Axum)                    â”‚
â”‚    ä»»åŠ¡åˆ†å‘ â€¢ è¿›åº¦ç›‘æ§ â€¢ æ•°æ®ç»Ÿè®¡ â€¢ WebSocketå®æ—¶é€šä¿¡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ è¯¦ç»†å®æ–½è®¡åˆ’

## ğŸ—‘ï¸ ç¬¬ä¸€é˜¶æ®µï¼šä»£ç æ¸…ç† (1-2å¤©) âœ… **å¤§éƒ¨åˆ†å·²å®Œæˆ**

### âœ… å·²å®Œæˆçš„æ¸…ç†ä»»åŠ¡:

#### A. åˆ é™¤è¿‡æ—¶çš„Handleræ¨¡å— âœ…
```bash
# å·²åˆ é™¤çš„æ–‡ä»¶
âœ… server-backend/src/handlers/billing.rs
âœ… server-backend/src/handlers/company_pricing.rs  
âœ… server-backend/src/handlers/devices.rs
âœ… server-backend/src/handlers/work_records.rs
âœ… server-backend/src/handlers/kpi.rs
âœ… server-backend/src/handlers/reports.rs

# ä¿ç•™çš„æ ¸å¿ƒæ¨¡å—
âœ… server-backend/src/handlers/auth.rs
âœ… server-backend/src/handlers/users.rs
âœ… server-backend/src/handlers/health.rs
âœ… server-backend/src/handlers/docs.rs
```

#### B. ç®€åŒ–Useræ•°æ®æ¨¡å‹ âœ…
**å·²å®Œæˆçš„Useræ¨¡å‹ç®€åŒ–**ï¼š
- âœ… ç§»é™¤`balance`ã€`max_employees`ã€`current_employees`ç­‰è®¡è´¹å­—æ®µ
- âœ… ç®€åŒ–æƒé™ä¸ºä¸¤ä¸ªè§’è‰²ï¼šProjectManagerã€Employee
- âœ… ç§»é™¤`parent_id`ç­‰å¤šå±‚çº§ç»“æ„
- âœ… ä½¿ç”¨Uuidæ›¿ä»£i32 ID

#### C. åˆ é™¤æ— å…³ç›®å½•å’Œæ–‡ä»¶ âœ…
```bash
# å·²åˆ é™¤çš„ç›®å½•å’Œæ–‡ä»¶
âœ… adb_xml_reader/          # ADBè®¾å¤‡ç®¡ç†ç›®å½•
âœ… server-backend/Cargo_query.toml  # Flow Farmçš„æŸ¥è¯¢é…ç½®
âœ… server-backend/query_users*.ps1  # Flow Farmçš„ç”¨æˆ·æŸ¥è¯¢è„šæœ¬
```

### ğŸ”„ éœ€è¦ä¿®å¤çš„é—®é¢˜:

ç”±äºæ¨¡å‹ç®€åŒ–è¿‡ç¨‹ä¸­å‘ç°çš„ç¼–è¯‘é”™è¯¯ï¼Œéœ€è¦åœ¨ä¸‹ä¸€æ­¥ä¿®å¤ï¼š
- Repositoryå±‚éœ€è¦é€‚é…æ–°çš„Uuid IDç±»å‹
- Serviceå±‚éœ€è¦é‡å†™ä»¥åŒ¹é…ç®€åŒ–çš„æ¨¡å‹
- Utilsæ¨¡å—ç¼ºå°‘hash_passwordå‡½æ•°
- æŸäº›handleræ–¹æ³•ç­¾åéœ€è¦è°ƒæ•´

**å½“å‰çŠ¶æ€**: Stage 1æ¸…ç†å·¥ä½œ85%å®Œæˆï¼Œéœ€è¦ä¿®å¤ç¼–è¯‘é”™è¯¯åæ‰èƒ½ç»§ç»­Stage 2ã€‚

**ç›®æ ‡ç®€åŒ–åçš„Useræ¨¡å‹**ï¼š
```rust
// server-backend/src/models.rs
#[derive(Debug, Clone, Serialize, Deserialize, sqlx::FromRow)]
pub struct User {
    pub id: Uuid,
    pub username: String,
    pub email: String,
    pub hashed_password: String,
    pub role: UserRole,
    pub full_name: String,
    pub is_active: bool,
    pub created_at: DateTime<Utc>,
    pub updated_at: DateTime<Utc>,
    pub last_login: Option<DateTime<Utc>>,
}

// ç®€åŒ–çš„æƒé™è§’è‰²
#[derive(Debug, Clone, Serialize, Deserialize, sqlx::Type)]
pub enum UserRole {
    ProjectManager,  // é¡¹ç›®ç®¡ç†å‘˜ - å¯ä»¥åˆ›å»ºé¡¹ç›®ã€åˆ†é…ä»»åŠ¡ã€æŸ¥çœ‹ç»Ÿè®¡
    Employee,        // æ™®é€šå‘˜å·¥ - åªèƒ½æŸ¥çœ‹å’Œæ›´æ–°è‡ªå·±çš„ä»»åŠ¡
}
```

#### C. åˆ é™¤æ— å…³ç›®å½•å’Œæ–‡ä»¶
```bash
# å®Œå…¨ä¸ç›¸å…³çš„ç›®å½•
âŒ adb_xml_reader/          # ADBè®¾å¤‡ç®¡ç†ï¼Œä¸TaskFleetæ— å…³
âŒ deploy/ ä¸­çš„Flow Farmè„šæœ¬ # ä¿ç•™é€šç”¨éƒ¨ç½²è„šæœ¬å³å¯

# éœ€è¦æ¸…ç†çš„é…ç½®æ–‡ä»¶
âŒ server-backend/Cargo_query.toml  # Flow Farmçš„æŸ¥è¯¢é…ç½®
âŒ server-backend/query_users*.ps1  # Flow Farmçš„ç”¨æˆ·æŸ¥è¯¢è„šæœ¬
```

#### D. æ›´æ–°mod.rsæ–‡ä»¶
```rust
// server-backend/src/handlers/mod.rs
pub mod auth;
pub mod health;
pub mod users;
pub mod docs;
// åˆ é™¤ï¼šbilling, company_pricing, devices, work_records

// åç»­è¦æ·»åŠ çš„TaskFleetæ ¸å¿ƒæ¨¡å—ï¼š
// pub mod tasks;     // ä»»åŠ¡ç®¡ç†
// pub mod projects;  // é¡¹ç›®ç®¡ç†  
// pub mod analytics; // æ•°æ®ç»Ÿè®¡
```

### 1.2 æ¸…ç†æ£€æŸ¥æ¸…å•
- [ ] åˆ é™¤billing.rsåŠç›¸å…³ä»£ç 
- [ ] åˆ é™¤company_pricing.rsåŠç›¸å…³ä»£ç 
- [ ] åˆ é™¤devices.rsåŠç›¸å…³ä»£ç 
- [ ] åˆ é™¤adb_xml_readerç›®å½•
- [ ] ç®€åŒ–Useræ¨¡å‹ï¼Œç§»é™¤è®¡è´¹å­—æ®µ
- [ ] æ›´æ–°handlers/mod.rs
- [ ] è¿è¡Œ`cargo check`ç¡®ä¿ç¼–è¯‘é€šè¿‡
- [ ] è¿è¡Œ`cargo test`ç¡®ä¿æµ‹è¯•é€šè¿‡

---

## ğŸ”§ ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘ (3-5å¤©)

### 2.1 æ•°æ®æ¨¡å‹è®¾è®¡

#### A. Taskï¼ˆä»»åŠ¡ï¼‰æ¨¡å‹
```rust
// server-backend/src/models/task.rs
#[derive(Debug, Clone, Serialize, Deserialize, sqlx::FromRow)]
pub struct Task {
    pub id: Uuid,
    pub title: String,
    pub description: Option<String>,
    pub project_id: Uuid,
    pub assigned_to: Option<Uuid>,  // åˆ†é…ç»™çš„å‘˜å·¥
    pub created_by: Uuid,           // åˆ›å»ºè€…ï¼ˆé¡¹ç›®ç®¡ç†å‘˜ï¼‰
    pub status: TaskStatus,
    pub priority: TaskPriority,
    pub due_date: Option<DateTime<Utc>>,
    pub estimated_hours: Option<f32>,    // é¢„ä¼°å·¥æ—¶
    pub actual_hours: Option<f32>,       // å®é™…å·¥æ—¶
    pub created_at: DateTime<Utc>,
    pub updated_at: DateTime<Utc>,
    pub completed_at: Option<DateTime<Utc>>,
}

#[derive(Debug, Clone, Serialize, Deserialize, sqlx::Type)]
pub enum TaskStatus {
    Todo,        // å¾…åŠ
    InProgress,  // è¿›è¡Œä¸­
    Review,      // å¾…å®¡æ ¸
    Completed,   // å·²å®Œæˆ
    Cancelled,   // å·²å–æ¶ˆ
}

#[derive(Debug, Clone, Serialize, Deserialize, sqlx::Type)]
pub enum TaskPriority {
    Low,     // ä½ä¼˜å…ˆçº§
    Medium,  // ä¸­ä¼˜å…ˆçº§  
    High,    // é«˜ä¼˜å…ˆçº§
    Urgent,  // ç´§æ€¥
}
```

#### B. Projectï¼ˆé¡¹ç›®ï¼‰æ¨¡å‹
```rust
// server-backend/src/models/project.rs
#[derive(Debug, Clone, Serialize, Deserialize, sqlx::FromRow)]
pub struct Project {
    pub id: Uuid,
    pub name: String,
    pub description: Option<String>,
    pub owner_id: Uuid,             // é¡¹ç›®è´Ÿè´£äºº
    pub status: ProjectStatus,
    pub start_date: Option<DateTime<Utc>>,
    pub end_date: Option<DateTime<Utc>>,
    pub created_at: DateTime<Utc>,
    pub updated_at: DateTime<Utc>,
}

#[derive(Debug, Clone, Serialize, Deserialize, sqlx::Type)]
pub enum ProjectStatus {
    Planning,    // è§„åˆ’ä¸­
    Active,      // è¿›è¡Œä¸­
    OnHold,      // æš‚åœ
    Completed,   // å·²å®Œæˆ
    Cancelled,   // å·²å–æ¶ˆ
}
```

#### C. WorkLogï¼ˆå·¥ä½œè®°å½•ï¼‰æ¨¡å‹
```rust
// server-backend/src/models/work_log.rs
#[derive(Debug, Clone, Serialize, Deserialize, sqlx::FromRow)]
pub struct WorkLog {
    pub id: Uuid,
    pub task_id: Uuid,
    pub user_id: Uuid,
    pub hours: f32,
    pub notes: Option<String>,
    pub logged_at: DateTime<Utc>,
    pub created_at: DateTime<Utc>,
}
```

### 2.2 APIç«¯ç‚¹è®¾è®¡

#### A. ä»»åŠ¡ç®¡ç†API
```rust
// server-backend/src/handlers/tasks.rs

// è·å–ä»»åŠ¡åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ï¼‰
// GET /api/tasks?project_id=xxx&assigned_to=xxx&status=xxx&page=1&limit=20
pub async fn get_tasks(
    Query(params): Query<TaskQueryParams>,
    auth: JwtAuth,
) -> Result<Json<PaginatedResponse<Task>>, ApiError>

// åˆ›å»ºå•ä¸ªä»»åŠ¡
// POST /api/tasks
pub async fn create_task(
    Json(payload): Json<CreateTaskRequest>,
    auth: JwtAuth,
) -> Result<Json<Task>, ApiError>

// æ‰¹é‡å¯¼å…¥ä»»åŠ¡ï¼ˆæ”¯æŒCSV/Excelï¼‰
// POST /api/tasks/batch-import
pub async fn batch_import_tasks(
    mut payload: Multipart,
    auth: JwtAuth,
) -> Result<Json<BatchImportResponse>, ApiError>

// æ›´æ–°ä»»åŠ¡çŠ¶æ€
// PUT /api/tasks/{id}/status
pub async fn update_task_status(
    Path(id): Path<Uuid>,
    Json(payload): Json<UpdateTaskStatusRequest>,
    auth: JwtAuth,
) -> Result<Json<Task>, ApiError>

// åˆ†é…ä»»åŠ¡ç»™å‘˜å·¥
// PUT /api/tasks/{id}/assign
pub async fn assign_task(
    Path(id): Path<Uuid>,
    Json(payload): Json<AssignTaskRequest>,
    auth: JwtAuth,
) -> Result<Json<Task>, ApiError>

// è®°å½•å·¥ä½œæ—¶é—´
// POST /api/tasks/{id}/work-logs
pub async fn log_work_time(
    Path(id): Path<Uuid>,
    Json(payload): Json<LogWorkTimeRequest>,
    auth: JwtAuth,
) -> Result<Json<WorkLog>, ApiError>
```

#### B. é¡¹ç›®ç®¡ç†API
```rust
// server-backend/src/handlers/projects.rs

// è·å–é¡¹ç›®åˆ—è¡¨
// GET /api/projects
pub async fn get_projects(
    Query(params): Query<ProjectQueryParams>,
    auth: JwtAuth,
) -> Result<Json<Vec<Project>>, ApiError>

// åˆ›å»ºé¡¹ç›®
// POST /api/projects  
pub async fn create_project(
    Json(payload): Json<CreateProjectRequest>,
    auth: JwtAuth,
) -> Result<Json<Project>, ApiError>

// è·å–é¡¹ç›®è¯¦æƒ…ï¼ˆåŒ…å«ä»»åŠ¡ç»Ÿè®¡ï¼‰
// GET /api/projects/{id}
pub async fn get_project_detail(
    Path(id): Path<Uuid>,
    auth: JwtAuth,
) -> Result<Json<ProjectDetailResponse>, ApiError>
```

#### C. æ•°æ®ç»Ÿè®¡API
```rust
// server-backend/src/handlers/analytics.rs

// è·å–ä»ªè¡¨æ¿æ¦‚è§ˆæ•°æ®
// GET /api/analytics/dashboard
pub async fn get_dashboard_overview(
    Query(params): Query<DashboardParams>,
    auth: JwtAuth,
) -> Result<Json<DashboardData>, ApiError>

// å‘˜å·¥æ•ˆç‡åˆ†æ
// GET /api/analytics/employee-efficiency
pub async fn get_employee_efficiency(
    Query(params): Query<EfficiencyParams>,
    auth: JwtAuth,
) -> Result<Json<EfficiencyReport>, ApiError>

// ä»»åŠ¡å®Œæˆè¶‹åŠ¿
// GET /api/analytics/task-trends
pub async fn get_task_trends(
    Query(params): Query<TrendParams>,
    auth: JwtAuth,
) -> Result<Json<TrendData>, ApiError>

// é¡¹ç›®è¿›åº¦æŠ¥å‘Š
// GET /api/analytics/project-progress
pub async fn get_project_progress(
    Query(params): Query<ProgressParams>,
    auth: JwtAuth,
) -> Result<Json<ProgressReport>, ApiError>
```

### 2.3 å®æ—¶é€šä¿¡è®¾è®¡
```rust
// server-backend/src/handlers/websocket.rs

// WebSocketè¿æ¥å¤„ç†
// GET /ws/task-updates
pub async fn task_updates_websocket(
    ws: WebSocketUpgrade,
    auth: JwtAuth,
) -> Response

// äº‹ä»¶ç±»å‹å®šä¹‰
#[derive(Debug, Serialize)]
pub enum TaskEvent {
    TaskCreated { task: Task },
    TaskUpdated { task: Task },
    TaskAssigned { task_id: Uuid, assigned_to: Uuid },
    TaskCompleted { task_id: Uuid, completed_by: Uuid },
}
```

### 2.4 æ•°æ®åº“è¿ç§»è„šæœ¬
```sql
-- migrations/002_create_tasks_table.sql
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR NOT NULL,
    description TEXT,
    owner_id UUID NOT NULL REFERENCES users(id),
    status VARCHAR NOT NULL,
    start_date TIMESTAMPTZ,
    end_date TIMESTAMPTZ,
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE TABLE tasks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title VARCHAR NOT NULL,
    description TEXT,
    project_id UUID NOT NULL REFERENCES projects(id),
    assigned_to UUID REFERENCES users(id),
    created_by UUID NOT NULL REFERENCES users(id),
    status VARCHAR NOT NULL DEFAULT 'todo',
    priority VARCHAR NOT NULL DEFAULT 'medium',
    due_date TIMESTAMPTZ,
    estimated_hours REAL,
    actual_hours REAL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    completed_at TIMESTAMPTZ
);

CREATE TABLE work_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id UUID NOT NULL REFERENCES tasks(id),
    user_id UUID NOT NULL REFERENCES users(id),
    hours REAL NOT NULL,
    notes TEXT,
    logged_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_tasks_assigned_to ON tasks(assigned_to);
CREATE INDEX idx_tasks_status ON tasks(status);
CREATE INDEX idx_tasks_project_id ON tasks(project_id);
CREATE INDEX idx_tasks_created_at ON tasks(created_at);
CREATE INDEX idx_work_logs_task_id ON work_logs(task_id);
CREATE INDEX idx_work_logs_user_id ON work_logs(user_id);
```

### 2.5 å¼€å‘æ£€æŸ¥æ¸…å•
- [ ] åˆ›å»ºTaskã€Projectã€WorkLogæ¨¡å‹
- [ ] å®ç°ä»»åŠ¡ç®¡ç†API endpoints
- [ ] å®ç°é¡¹ç›®ç®¡ç†API endpoints  
- [ ] å®ç°æ•°æ®ç»Ÿè®¡API endpoints
- [ ] æ·»åŠ WebSocketå®æ—¶é€šä¿¡
- [ ] åˆ›å»ºæ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™APIæ–‡æ¡£

---

## ğŸ¨ ç¬¬ä¸‰é˜¶æ®µï¼šå‰ç«¯é‡æ„ (2-3å¤©)

### 3.1 é¡¹ç›®ç»“æ„è®¾è®¡
```
server-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx           # ä»ªè¡¨æ¿ - é¡¹ç›®æ¦‚è§ˆ
â”‚   â”‚   â”œâ”€â”€ TaskManagement.tsx      # ä»»åŠ¡ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ ProjectManagement.tsx   # é¡¹ç›®ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ EmployeeManagement.tsx  # å‘˜å·¥ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Analytics.tsx           # æ•°æ®åˆ†æé¡µé¢
â”‚   â”‚   â””â”€â”€ Login.tsx               # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”œâ”€â”€ AppLayout.tsx       # ä¸»å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx         # ä¾§è¾¹æ å¯¼èˆª
â”‚   â”‚   â”‚   â””â”€â”€ Header.tsx          # é¡¶éƒ¨å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ task/
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskCard.tsx        # ä»»åŠ¡å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskList.tsx        # ä»»åŠ¡åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskForm.tsx        # ä»»åŠ¡åˆ›å»º/ç¼–è¾‘è¡¨å•
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskStatusBadge.tsx # ä»»åŠ¡çŠ¶æ€å¾½ç« 
â”‚   â”‚   â”‚   â””â”€â”€ BatchImport.tsx     # æ‰¹é‡å¯¼å…¥ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ project/
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectCard.tsx     # é¡¹ç›®å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectForm.tsx     # é¡¹ç›®è¡¨å•
â”‚   â”‚   â”‚   â””â”€â”€ ProjectProgress.tsx # é¡¹ç›®è¿›åº¦
â”‚   â”‚   â””â”€â”€ charts/
â”‚   â”‚       â”œâ”€â”€ ProgressChart.tsx   # è¿›åº¦å›¾è¡¨
â”‚   â”‚       â”œâ”€â”€ EfficiencyChart.tsx # æ•ˆç‡å›¾è¡¨
â”‚   â”‚       â””â”€â”€ TrendChart.tsx      # è¶‹åŠ¿å›¾è¡¨
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api.ts                  # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ tasks.ts                # ä»»åŠ¡ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ projects.ts             # é¡¹ç›®ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ analytics.ts            # ç»Ÿè®¡ç›¸å…³API
â”‚   â”‚   â””â”€â”€ websocket.ts            # WebSocketæœåŠ¡
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ authStore.ts            # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ taskStore.ts            # ä»»åŠ¡çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ projectStore.ts         # é¡¹ç›®çŠ¶æ€
â”‚   â”‚   â””â”€â”€ globalStore.ts          # å…¨å±€çŠ¶æ€
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ task.ts                 # ä»»åŠ¡ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ project.ts              # é¡¹ç›®ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ user.ts                 # ç”¨æˆ·ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ api.ts                  # APIå“åº”ç±»å‹
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ date.ts                 # æ—¥æœŸå·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ format.ts               # æ ¼å¼åŒ–å·¥å…·
â”‚       â””â”€â”€ constants.ts            # å¸¸é‡å®šä¹‰
```

### 3.2 æ ¸å¿ƒé¡µé¢å®ç°

#### A. ä»ªè¡¨æ¿é¡µé¢
```typescript
// src/pages/Dashboard.tsx
import React, { useEffect } from 'react';
import { Card, Row, Col, Statistic, Progress } from 'antd';
import { CheckCircleOutlined, ClockCircleOutlined, LoadingOutlined } from '@ant-design/icons';
import { useTaskStore } from '../stores/taskStore';
import { useProjectStore } from '../stores/projectStore';
import ProgressChart from '../components/charts/ProgressChart';
import TrendChart from '../components/charts/TrendChart';

export const Dashboard: React.FC = () => {
  const { tasks, fetchTasks } = useTaskStore();
  const { projects, fetchProjects } = useProjectStore();

  useEffect(() => {
    fetchTasks();
    fetchProjects();
  }, []);

  // ç»Ÿè®¡æ•°æ®è®¡ç®—
  const totalTasks = tasks.length;
  const completedTasks = tasks.filter(t => t.status === 'completed').length;
  const inProgressTasks = tasks.filter(t => t.status === 'in_progress').length;
  const completionRate = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;

  return (
    <div className="dashboard">
      <Row gutter={[16, 16]}>
        {/* ç»Ÿè®¡å¡ç‰‡ */}
        <Col span={6}>
          <Card>
            <Statistic
              title="æ€»ä»»åŠ¡æ•°"
              value={totalTasks}
              prefix={<CheckCircleOutlined />}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="å·²å®Œæˆ"
              value={completedTasks}
              prefix={<CheckCircleOutlined style={{ color: '#52c41a' }} />}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="è¿›è¡Œä¸­"
              value={inProgressTasks}
              prefix={<LoadingOutlined style={{ color: '#1890ff' }} />}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="å®Œæˆç‡"
              value={completionRate.toFixed(1)}
              suffix="%"
              prefix={<ClockCircleOutlined />}
            />
          </Card>
        </Col>
      </Row>

      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>
        {/* è¿›åº¦å›¾è¡¨ */}
        <Col span={12}>
          <Card title="é¡¹ç›®è¿›åº¦">
            <ProgressChart data={projects} />
          </Card>
        </Col>
        {/* è¶‹åŠ¿å›¾è¡¨ */}
        <Col span={12}>
          <Card title="ä»»åŠ¡å®Œæˆè¶‹åŠ¿">
            <TrendChart />
          </Card>
        </Col>
      </Row>
    </div>
  );
};
```

#### B. ä»»åŠ¡ç®¡ç†é¡µé¢
```typescript
// src/pages/TaskManagement.tsx
import React, { useState, useEffect } from 'react';
import { Table, Button, Space, Tag, Modal, Select, Input } from 'antd';
import { PlusOutlined, FilterOutlined } from '@ant-design/icons';
import { useTaskStore } from '../stores/taskStore';
import TaskForm from '../components/task/TaskForm';
import BatchImport from '../components/task/BatchImport';

export const TaskManagement: React.FC = () => {
  const { tasks, loading, fetchTasks, updateTaskStatus } = useTaskStore();
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [isBatchImportVisible, setIsBatchImportVisible] = useState(false);
  const [filters, setFilters] = useState({
    status: '',
    assignedTo: '',
    priority: '',
  });

  useEffect(() => {
    fetchTasks(filters);
  }, [filters]);

  const columns = [
    {
      title: 'ä»»åŠ¡æ ‡é¢˜',
      dataIndex: 'title',
      key: 'title',
    },
    {
      title: 'çŠ¶æ€',
      dataIndex: 'status',
      key: 'status',
      render: (status: string) => {
        const statusMap = {
          todo: { color: 'default', text: 'å¾…åŠ' },
          in_progress: { color: 'processing', text: 'è¿›è¡Œä¸­' },
          review: { color: 'warning', text: 'å¾…å®¡æ ¸' },
          completed: { color: 'success', text: 'å·²å®Œæˆ' },
          cancelled: { color: 'error', text: 'å·²å–æ¶ˆ' },
        };
        const config = statusMap[status] || statusMap.todo;
        return <Tag color={config.color}>{config.text}</Tag>;
      },
    },
    {
      title: 'ä¼˜å…ˆçº§',
      dataIndex: 'priority',
      key: 'priority',
      render: (priority: string) => {
        const priorityMap = {
          low: { color: 'default', text: 'ä½' },
          medium: { color: 'warning', text: 'ä¸­' },
          high: { color: 'error', text: 'é«˜' },
          urgent: { color: 'magenta', text: 'ç´§æ€¥' },
        };
        const config = priorityMap[priority] || priorityMap.medium;
        return <Tag color={config.color}>{config.text}</Tag>;
      },
    },
    {
      title: 'åˆ†é…ç»™',
      dataIndex: 'assigned_to_name',
      key: 'assigned_to_name',
    },
    {
      title: 'æˆªæ­¢æ—¥æœŸ',
      dataIndex: 'due_date',
      key: 'due_date',
      render: (date: string) => date ? new Date(date).toLocaleDateString() : '-',
    },
    {
      title: 'æ“ä½œ',
      key: 'action',
      render: (_, record) => (
        <Space size="middle">
          <Button size="small" onClick={() => handleStatusChange(record.id)}>
            æ›´æ–°çŠ¶æ€
          </Button>
          <Button size="small" type="link">
            æŸ¥çœ‹è¯¦æƒ…
          </Button>
        </Space>
      ),
    },
  ];

  const handleStatusChange = (taskId: string) => {
    // å®ç°çŠ¶æ€æ›´æ–°é€»è¾‘
  };

  return (
    <div className="task-management">
      {/* å·¥å…·æ  */}
      <div style={{ marginBottom: 16 }}>
        <Space>
          <Button 
            type="primary" 
            icon={<PlusOutlined />}
            onClick={() => setIsModalVisible(true)}
          >
            åˆ›å»ºä»»åŠ¡
          </Button>
          <Button 
            icon={<PlusOutlined />}
            onClick={() => setIsBatchImportVisible(true)}
          >
            æ‰¹é‡å¯¼å…¥
          </Button>
          <Select
            placeholder="çŠ¶æ€ç­›é€‰"
            style={{ width: 120 }}
            allowClear
            onChange={(value) => setFilters(prev => ({ ...prev, status: value }))}
          >
            <Select.Option value="todo">å¾…åŠ</Select.Option>
            <Select.Option value="in_progress">è¿›è¡Œä¸­</Select.Option>
            <Select.Option value="completed">å·²å®Œæˆ</Select.Option>
          </Select>
          <Input.Search
            placeholder="æœç´¢ä»»åŠ¡"
            style={{ width: 200 }}
            onSearch={(value) => {/* å®ç°æœç´¢é€»è¾‘ */}}
          />
        </Space>
      </div>

      {/* ä»»åŠ¡è¡¨æ ¼ */}
      <Table
        columns={columns}
        dataSource={tasks}
        loading={loading}
        rowKey="id"
        pagination={{
          pageSize: 20,
          showSizeChanger: true,
          showQuickJumper: true,
        }}
      />

      {/* åˆ›å»ºä»»åŠ¡æ¨¡æ€æ¡† */}
      <Modal
        title="åˆ›å»ºä»»åŠ¡"
        visible={isModalVisible}
        onCancel={() => setIsModalVisible(false)}
        footer={null}
        width={600}
      >
        <TaskForm onSuccess={() => setIsModalVisible(false)} />
      </Modal>

      {/* æ‰¹é‡å¯¼å…¥æ¨¡æ€æ¡† */}
      <Modal
        title="æ‰¹é‡å¯¼å…¥ä»»åŠ¡"
        visible={isBatchImportVisible}
        onCancel={() => setIsBatchImportVisible(false)}
        footer={null}
        width={800}
      >
        <BatchImport onSuccess={() => setIsBatchImportVisible(false)} />
      </Modal>
    </div>
  );
};
```

### 3.3 çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
```typescript
// src/stores/taskStore.ts
import { create } from 'zustand';
import { Task, CreateTaskRequest, TaskQueryParams } from '../types/task';
import { taskService } from '../services/tasks';

interface TaskState {
  tasks: Task[];
  loading: boolean;
  error: string | null;
  
  // Actions
  fetchTasks: (filters?: TaskQueryParams) => Promise<void>;
  createTask: (data: CreateTaskRequest) => Promise<void>;
  updateTaskStatus: (id: string, status: string) => Promise<void>;
  assignTask: (id: string, userId: string) => Promise<void>;
}

export const useTaskStore = create<TaskState>((set, get) => ({
  tasks: [],
  loading: false,
  error: null,

  fetchTasks: async (filters) => {
    set({ loading: true, error: null });
    try {
      const tasks = await taskService.getTasks(filters);
      set({ tasks, loading: false });
    } catch (error) {
      set({ error: error.message, loading: false });
    }
  },

  createTask: async (data) => {
    try {
      const newTask = await taskService.createTask(data);
      set(state => ({ 
        tasks: [newTask, ...state.tasks] 
      }));
    } catch (error) {
      set({ error: error.message });
    }
  },

  updateTaskStatus: async (id, status) => {
    try {
      const updatedTask = await taskService.updateTaskStatus(id, status);
      set(state => ({
        tasks: state.tasks.map(task => 
          task.id === id ? updatedTask : task
        )
      }));
    } catch (error) {
      set({ error: error.message });
    }
  },

  assignTask: async (id, userId) => {
    try {
      const updatedTask = await taskService.assignTask(id, userId);
      set(state => ({
        tasks: state.tasks.map(task => 
          task.id === id ? updatedTask : task
        )
      }));
    } catch (error) {
      set({ error: error.message });
    }
  },
}));
```

### 3.4 WebSocketå®æ—¶é€šä¿¡
```typescript
// src/services/websocket.ts
import { TaskEvent } from '../types/api';

class WebSocketService {
  private ws: WebSocket | null = null;
  private listeners: Map<string, Array<(data: any) => void>> = new Map();

  connect(token: string) {
    const wsUrl = `ws://localhost:8080/ws/task-updates?token=${token}`;
    this.ws = new WebSocket(wsUrl);

    this.ws.onopen = () => {
      console.log('WebSocketè¿æ¥å·²å»ºç«‹');
    };

    this.ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      this.notifyListeners(data.type, data.payload);
    };

    this.ws.onclose = () => {
      console.log('WebSocketè¿æ¥å·²å…³é—­');
      // è‡ªåŠ¨é‡è¿é€»è¾‘
      setTimeout(() => this.connect(token), 5000);
    };
  }

  on(eventType: string, callback: (data: any) => void) {
    if (!this.listeners.has(eventType)) {
      this.listeners.set(eventType, []);
    }
    this.listeners.get(eventType)!.push(callback);
  }

  private notifyListeners(eventType: string, data: any) {
    const callbacks = this.listeners.get(eventType) || [];
    callbacks.forEach(callback => callback(data));
  }

  disconnect() {
    if (this.ws) {
      this.ws.close();
      this.ws = null;
    }
  }
}

export const websocketService = new WebSocketService();
```

### 3.5 å‰ç«¯å¼€å‘æ£€æŸ¥æ¸…å•
- [ ] åˆ›å»ºé¡µé¢ç»„ä»¶ï¼ˆDashboardã€TaskManagementç­‰ï¼‰
- [ ] å®ç°ä»»åŠ¡ç®¡ç†åŠŸèƒ½ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€çŠ¶æ€æ›´æ–°ï¼‰
- [ ] å®ç°æ‰¹é‡å¯¼å…¥åŠŸèƒ½
- [ ] åˆ›å»ºæ•°æ®å¯è§†åŒ–å›¾è¡¨
- [ ] è®¾ç½®çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
- [ ] å®ç°WebSocketå®æ—¶é€šä¿¡
- [ ] æ·»åŠ é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
- [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼ˆå“åº”å¼è®¾è®¡ï¼‰

---

## ğŸ’» ç¬¬å››é˜¶æ®µï¼šæ¡Œé¢å®¢æˆ·ç«¯ä¼˜åŒ– (2-3å¤©)

### 4.1 å‘˜å·¥å®¢æˆ·ç«¯é‡æ–°å®šä½

#### A. æ ¸å¿ƒåŠŸèƒ½èšç„¦
**ä¸“æ³¨äºå‘˜å·¥ä»»åŠ¡æ‰§è¡Œåœºæ™¯**ï¼š
- ğŸ¯ **ä»»åŠ¡æ¥æ”¶** - æ¥æ”¶åˆ†é…çš„ä»»åŠ¡é€šçŸ¥
- ğŸ¯ **çŠ¶æ€æ›´æ–°** - å¿«é€Ÿæ›´æ–°ä»»åŠ¡çŠ¶æ€
- ğŸ¯ **æ—¶é—´è®°å½•** - è®°å½•å®é™…å·¥ä½œæ—¶é—´
- ğŸ¯ **è¿›åº¦æ±‡æŠ¥** - ç®€å•çš„è¿›åº¦æ±‡æŠ¥åŠŸèƒ½

**åˆ é™¤ä¸å¿…è¦çš„åŠŸèƒ½**ï¼š
- âŒ è®¾å¤‡ç®¡ç†åŠŸèƒ½
- âŒ ç¤¾åª’è‡ªåŠ¨åŒ–åŠŸèƒ½
- âŒ å¤æ‚çš„ç³»ç»Ÿé…ç½®
- âŒ ç®¡ç†å‘˜åŠŸèƒ½

#### B. Tauriå‘½ä»¤é‡æ„
```rust
// src-tauri/src/commands/tasks.rs
use crate::models::{Task, WorkLog};
use crate::services::api_client::ApiClient;

#[tauri::command]
pub async fn get_my_tasks(
    auth_token: String,
) -> Result<Vec<Task>, String> {
    let client = ApiClient::new(&auth_token);
    client.get_my_tasks().await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn update_task_status(
    task_id: String,
    status: String,
    auth_token: String,
) -> Result<Task, String> {
    let client = ApiClient::new(&auth_token);
    client.update_task_status(&task_id, &status).await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn log_work_time(
    task_id: String,
    hours: f32,
    notes: Option<String>,
    auth_token: String,
) -> Result<WorkLog, String> {
    let client = ApiClient::new(&auth_token);
    client.log_work_time(&task_id, hours, notes).await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn get_notifications(
    auth_token: String,
) -> Result<Vec<TaskNotification>, String> {
    let client = ApiClient::new(&auth_token);
    client.get_notifications().await
        .map_err(|e| e.to_string())
}
```

#### C. ç®€æ´çš„ç”¨æˆ·ç•Œé¢
```html
<!-- src/index.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFleet å‘˜å·¥ç«¯</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- é¡¶éƒ¨æ  -->
        <header class="app-header">
            <div class="header-left">
                <h1>TaskFleet</h1>
                <span class="subtitle">å‘˜å·¥å·¥ä½œå°</span>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span id="username">å‘˜å·¥å§“å</span>
                    <button id="logout-btn">é€€å‡º</button>
                </div>
            </div>
        </header>

        <!-- ä¸»è¦å†…å®¹åŒº -->
        <main class="main-content">
            <!-- ä¾§è¾¹æ  -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <a href="#" class="nav-item active" data-page="tasks">
                        <i class="icon-tasks"></i>
                        æˆ‘çš„ä»»åŠ¡
                    </a>
                    <a href="#" class="nav-item" data-page="notifications">
                        <i class="icon-bell"></i>
                        é€šçŸ¥ä¸­å¿ƒ
                        <span class="badge" id="notification-count">3</span>
                    </a>
                    <a href="#" class="nav-item" data-page="profile">
                        <i class="icon-user"></i>
                        ä¸ªäººè®¾ç½®
                    </a>
                </nav>
            </aside>

            <!-- å†…å®¹åŒºåŸŸ -->
            <section class="content-area">
                <!-- ä»»åŠ¡é¡µé¢ -->
                <div id="tasks-page" class="page active">
                    <div class="page-header">
                        <h2>æˆ‘çš„ä»»åŠ¡</h2>
                        <div class="filter-controls">
                            <select id="status-filter">
                                <option value="">æ‰€æœ‰çŠ¶æ€</option>
                                <option value="todo">å¾…åŠ</option>
                                <option value="in_progress">è¿›è¡Œä¸­</option>
                                <option value="completed">å·²å®Œæˆ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="task-list" id="task-list">
                        <!-- ä»»åŠ¡å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- é€šçŸ¥é¡µé¢ -->
                <div id="notifications-page" class="page">
                    <div class="page-header">
                        <h2>é€šçŸ¥ä¸­å¿ƒ</h2>
                    </div>
                    <div class="notification-list" id="notification-list">
                        <!-- é€šçŸ¥åˆ—è¡¨ -->
                    </div>
                </div>
            </section>
        </main>

        <!-- ä»»åŠ¡è¯¦æƒ…æ¨¡æ€æ¡† -->
        <div id="task-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-task-title">ä»»åŠ¡è¯¦æƒ…</h3>
                    <button class="close-btn" id="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="task-info">
                        <p><strong>æè¿°ï¼š</strong><span id="modal-task-description"></span></p>
                        <p><strong>ä¼˜å…ˆçº§ï¼š</strong><span id="modal-task-priority"></span></p>
                        <p><strong>æˆªæ­¢æ—¥æœŸï¼š</strong><span id="modal-task-due-date"></span></p>
                    </div>
                    
                    <div class="status-update">
                        <label for="status-select">æ›´æ–°çŠ¶æ€ï¼š</label>
                        <select id="status-select">
                            <option value="todo">å¾…åŠ</option>
                            <option value="in_progress">è¿›è¡Œä¸­</option>
                            <option value="review">å¾…å®¡æ ¸</option>
                            <option value="completed">å·²å®Œæˆ</option>
                        </select>
                        <button id="update-status-btn">æ›´æ–°çŠ¶æ€</button>
                    </div>

                    <div class="time-logging">
                        <label for="work-hours">è®°å½•å·¥ä½œæ—¶é—´ï¼š</label>
                        <input type="number" id="work-hours" step="0.5" min="0" placeholder="å°æ—¶">
                        <input type="text" id="work-notes" placeholder="å·¥ä½œå¤‡æ³¨ï¼ˆå¯é€‰ï¼‰">
                        <button id="log-time-btn">è®°å½•æ—¶é—´</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
```

#### D. å‰ç«¯JavaScripté€»è¾‘
```javascript
// src/app.js
class TaskFleetApp {
    constructor() {
        this.authToken = localStorage.getItem('auth_token');
        this.currentPage = 'tasks';
        this.tasks = [];
        this.notifications = [];
        
        this.init();
    }

    async init() {
        if (!this.authToken) {
            this.showLogin();
            return;
        }

        this.setupEventListeners();
        await this.loadTasks();
        await this.loadNotifications();
        this.startPeriodicUpdate();
    }

    setupEventListeners() {
        // å¯¼èˆªèœå•ç‚¹å‡»
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const page = e.currentTarget.dataset.page;
                this.switchPage(page);
            });
        });

        // ä»»åŠ¡çŠ¶æ€ç­›é€‰
        document.getElementById('status-filter').addEventListener('change', (e) => {
            this.filterTasks(e.target.value);
        });

        // æ¨¡æ€æ¡†å…³é—­
        document.getElementById('close-modal').addEventListener('click', () => {
            this.hideModal();
        });

        // çŠ¶æ€æ›´æ–°
        document.getElementById('update-status-btn').addEventListener('click', () => {
            this.updateTaskStatus();
        });

        // æ—¶é—´è®°å½•
        document.getElementById('log-time-btn').addEventListener('click', () => {
            this.logWorkTime();
        });
    }

    async loadTasks() {
        try {
            this.tasks = await window.__TAURI__.invoke('get_my_tasks', {
                authToken: this.authToken
            });
            this.renderTasks();
        } catch (error) {
            console.error('åŠ è½½ä»»åŠ¡å¤±è´¥:', error);
            this.showError('åŠ è½½ä»»åŠ¡å¤±è´¥');
        }
    }

    renderTasks() {
        const taskList = document.getElementById('task-list');
        taskList.innerHTML = '';

        this.tasks.forEach(task => {
            const taskCard = this.createTaskCard(task);
            taskList.appendChild(taskCard);
        });
    }

    createTaskCard(task) {
        const card = document.createElement('div');
        card.className = 'task-card';
        card.dataset.taskId = task.id;

        const priorityClass = this.getPriorityClass(task.priority);
        const statusText = this.getStatusText(task.status);

        card.innerHTML = `
            <div class="task-header">
                <h3 class="task-title">${task.title}</h3>
                <span class="task-priority ${priorityClass}">${task.priority}</span>
            </div>
            <div class="task-meta">
                <span class="task-status">${statusText}</span>
                <span class="task-due-date">${this.formatDate(task.due_date)}</span>
            </div>
            <div class="task-description">
                ${task.description || 'æ— æè¿°'}
            </div>
            <div class="task-actions">
                <button class="btn-primary" onclick="app.showTaskDetail('${task.id}')">
                    æŸ¥çœ‹è¯¦æƒ…
                </button>
                <button class="btn-secondary" onclick="app.quickStatusUpdate('${task.id}')">
                    å¿«é€Ÿæ›´æ–°
                </button>
            </div>
        `;

        return card;
    }

    async updateTaskStatus() {
        const taskId = this.currentTaskId;
        const newStatus = document.getElementById('status-select').value;

        try {
            await window.__TAURI__.invoke('update_task_status', {
                taskId,
                status: newStatus,
                authToken: this.authToken
            });

            this.showSuccess('ä»»åŠ¡çŠ¶æ€æ›´æ–°æˆåŠŸ');
            this.hideModal();
            await this.loadTasks(); // é‡æ–°åŠ è½½ä»»åŠ¡åˆ—è¡¨
        } catch (error) {
            console.error('æ›´æ–°çŠ¶æ€å¤±è´¥:', error);
            this.showError('æ›´æ–°çŠ¶æ€å¤±è´¥');
        }
    }

    async logWorkTime() {
        const taskId = this.currentTaskId;
        const hours = parseFloat(document.getElementById('work-hours').value);
        const notes = document.getElementById('work-notes').value || null;

        if (!hours || hours <= 0) {
            this.showError('è¯·è¾“å…¥æœ‰æ•ˆçš„å·¥ä½œæ—¶é—´');
            return;
        }

        try {
            await window.__TAURI__.invoke('log_work_time', {
                taskId,
                hours,
                notes,
                authToken: this.authToken
            });

            this.showSuccess('å·¥ä½œæ—¶é—´è®°å½•æˆåŠŸ');
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('work-hours').value = '';
            document.getElementById('work-notes').value = '';
        } catch (error) {
            console.error('è®°å½•æ—¶é—´å¤±è´¥:', error);
            this.showError('è®°å½•æ—¶é—´å¤±è´¥');
        }
    }

    // å®šæœŸæ›´æ–°ä»»åŠ¡çŠ¶æ€
    startPeriodicUpdate() {
        setInterval(async () => {
            await this.loadTasks();
            await this.loadNotifications();
        }, 30000); // æ¯30ç§’æ›´æ–°ä¸€æ¬¡
    }

    // å·¥å…·æ–¹æ³•
    getPriorityClass(priority) {
        const map = {
            low: 'priority-low',
            medium: 'priority-medium',
            high: 'priority-high',
            urgent: 'priority-urgent'
        };
        return map[priority] || 'priority-medium';
    }

    getStatusText(status) {
        const map = {
            todo: 'å¾…åŠ',
            in_progress: 'è¿›è¡Œä¸­',
            review: 'å¾…å®¡æ ¸',
            completed: 'å·²å®Œæˆ',
            cancelled: 'å·²å–æ¶ˆ'
        };
        return map[status] || status;
    }

    formatDate(dateString) {
        if (!dateString) return 'æ— æˆªæ­¢æ—¥æœŸ';
        return new Date(dateString).toLocaleDateString('zh-CN');
    }

    showSuccess(message) {
        // å®ç°æˆåŠŸæç¤º
        console.log('Success:', message);
    }

    showError(message) {
        // å®ç°é”™è¯¯æç¤º
        console.error('Error:', message);
    }
}

// åˆå§‹åŒ–åº”ç”¨
const app = new TaskFleetApp();
```

### 4.2 æ¡Œé¢å®¢æˆ·ç«¯æ£€æŸ¥æ¸…å•
- [ ] åˆ é™¤è®¾å¤‡ç®¡ç†ç›¸å…³ä»£ç 
- [ ] é‡æ„Tauriå‘½ä»¤ä¸ºä»»åŠ¡ç›¸å…³åŠŸèƒ½
- [ ] å®ç°ç®€æ´çš„å‘˜å·¥ç•Œé¢
- [ ] æ·»åŠ ä»»åŠ¡çŠ¶æ€æ›´æ–°åŠŸèƒ½
- [ ] æ·»åŠ å·¥ä½œæ—¶é—´è®°å½•åŠŸèƒ½
- [ ] å®ç°ç³»ç»Ÿæ‰˜ç›˜å’Œé€šçŸ¥
- [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- [ ] æ·»åŠ ç¦»çº¿ç¼“å­˜åŠŸèƒ½

---

## ğŸš€ ç¬¬äº”é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–ä¸éƒ¨ç½² (1-2å¤©)

### 5.1 æ•°æ®åº“ä¼˜åŒ–
```sql
-- æ·»åŠ å…³é”®ç´¢å¼•
CREATE INDEX idx_tasks_assigned_to ON tasks(assigned_to);
CREATE INDEX idx_tasks_status ON tasks(status);
CREATE INDEX idx_tasks_created_at ON tasks(created_at);
CREATE INDEX idx_tasks_project_id ON tasks(project_id);
CREATE INDEX idx_work_logs_task_id ON work_logs(task_id);
CREATE INDEX idx_work_logs_user_id ON work_logs(user_id);

-- æ·»åŠ å¤åˆç´¢å¼•
CREATE INDEX idx_tasks_status_assigned ON tasks(status, assigned_to);
CREATE INDEX idx_tasks_project_status ON tasks(project_id, status);
```

### 5.2 APIæ€§èƒ½ä¼˜åŒ–
```rust
// æ·»åŠ åˆ†é¡µæ”¯æŒ
#[derive(Debug, Deserialize)]
pub struct PaginationParams {
    pub page: Option<u32>,
    pub limit: Option<u32>,
}

// æ·»åŠ ç¼“å­˜
use moka::future::Cache;
use std::time::Duration;

pub struct CacheService {
    dashboard_cache: Cache<String, DashboardData>,
}

impl CacheService {
    pub fn new() -> Self {
        Self {
            dashboard_cache: Cache::builder()
                .max_capacity(1000)
                .time_to_live(Duration::from_secs(300)) // 5åˆ†é’Ÿç¼“å­˜
                .build(),
        }
    }
}
```

### 5.3 å‰ç«¯æ€§èƒ½ä¼˜åŒ–
```typescript
// å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡ä»»åŠ¡æ—¶ï¼‰
import { FixedSizeList as List } from 'react-window';

const TaskVirtualList: React.FC<{ tasks: Task[] }> = ({ tasks }) => {
  const Row = ({ index, style }) => (
    <div style={style}>
      <TaskCard task={tasks[index]} />
    </div>
  );

  return (
    <List
      height={600}
      itemCount={tasks.length}
      itemSize={120}
    >
      {Row}
    </List>
  );
};

// å®ç°debounceæœç´¢
import { useDebouncedCallback } from 'use-debounce';

const SearchInput: React.FC = () => {
  const debounced = useDebouncedCallback(
    (value) => {
      // æ‰§è¡Œæœç´¢
    },
    300
  );

  return (
    <Input 
      placeholder="æœç´¢ä»»åŠ¡"
      onChange={(e) => debounced(e.target.value)}
    />
  );
};
```

### 5.4 éƒ¨ç½²é…ç½®
```yaml
# docker-compose.yml
version: '3.8'
services:
  taskfleet-backend:
    build: ./server-backend
    ports:
      - "8080:8080"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/taskfleet
      - JWT_SECRET=your-secret-key
    depends_on:
      - db

  taskfleet-frontend:
    build: ./server-frontend
    ports:
      - "3000:80"
    depends_on:
      - taskfleet-backend

  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=taskfleet
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

### 5.5 éƒ¨ç½²æ£€æŸ¥æ¸…å•
- [ ] åˆ›å»ºDockeré…ç½®æ–‡ä»¶
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“
- [ ] è®¾ç½®ç¯å¢ƒå˜é‡
- [ ] é…ç½®åå‘ä»£ç†ï¼ˆNginxï¼‰
- [ ] è®¾ç½®SSLè¯ä¹¦
- [ ] é…ç½®æ—¥å¿—æ”¶é›†
- [ ] è®¾ç½®ç›‘æ§å’Œå‘Šè­¦
- [ ] ç¼–å†™éƒ¨ç½²è„šæœ¬

---

## ğŸ“Š é¡¹ç›®å®Œæˆåº¦è¿½è¸ª

### æ€»ä½“è¿›åº¦
```
ç¬¬ä¸€é˜¶æ®µ: ä»£ç æ¸…ç†      [    ] 0% -> [ âœ“  ] 100%
ç¬¬äºŒé˜¶æ®µ: æ ¸å¿ƒåŠŸèƒ½å¼€å‘   [    ] 0% -> [ âœ“  ] 100%  
ç¬¬ä¸‰é˜¶æ®µ: å‰ç«¯é‡æ„      [    ] 0% -> [ âœ“  ] 100%
ç¬¬å››é˜¶æ®µ: æ¡Œé¢å®¢æˆ·ç«¯    [    ] 0% -> [ âœ“  ] 100%
ç¬¬äº”é˜¶æ®µ: æ€§èƒ½ä¼˜åŒ–      [    ] 0% -> [ âœ“  ] 100%
```

### åŠŸèƒ½å®Œæˆåº¦è¿½è¸ª
- [ ] **ä»»åŠ¡åˆ†å‘åŠŸèƒ½**
  - [ ] å•ä¸ªä»»åŠ¡åˆ›å»º
  - [ ] æ‰¹é‡ä»»åŠ¡å¯¼å…¥
  - [ ] æ™ºèƒ½ä»»åŠ¡åˆ†é…
  - [ ] ä»»åŠ¡çŠ¶æ€ç®¡ç†

- [ ] **è¿›åº¦ç›‘æ§åŠŸèƒ½**  
  - [ ] å®æ—¶ä»»åŠ¡çŠ¶æ€åŒæ­¥
  - [ ] é¡¹ç›®è¿›åº¦æ¦‚è§ˆ
  - [ ] å‘˜å·¥å·¥ä½œçŠ¶æ€ç›‘æ§
  - [ ] WebSocketå®æ—¶é€šä¿¡

- [ ] **æ•°æ®ç»Ÿè®¡åŠŸèƒ½**
  - [ ] å‘˜å·¥æ•ˆç‡åˆ†æ
  - [ ] ä»»åŠ¡å®Œæˆè¶‹åŠ¿
  - [ ] é¡¹ç›®è¿›åº¦æŠ¥å‘Š
  - [ ] æ•°æ®å¯è§†åŒ–å›¾è¡¨

- [ ] **å‘˜å·¥å®¢æˆ·ç«¯**
  - [ ] ä»»åŠ¡æ¥æ”¶å’ŒæŸ¥çœ‹
  - [ ] ä»»åŠ¡çŠ¶æ€æ›´æ–°
  - [ ] å·¥ä½œæ—¶é—´è®°å½•
  - [ ] ç³»ç»Ÿé€šçŸ¥

### æŠ€æœ¯å€ºåŠ¡æ¸…ç†
- [ ] åˆ é™¤æ‰€æœ‰Flow Farmé—ç•™ä»£ç 
- [ ] ç®€åŒ–ç”¨æˆ·æƒé™æ¨¡å‹
- [ ] ç§»é™¤è®¾å¤‡ç®¡ç†åŠŸèƒ½
- [ ] ç§»é™¤è®¡è´¹ç³»ç»ŸåŠŸèƒ½
- [ ] ç»Ÿä¸€ä»£ç é£æ ¼å’Œå‘½å

---

## ğŸ¯ æˆåŠŸéªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
1. **ç®¡ç†å‘˜å¯ä»¥åœ¨5åˆ†é’Ÿå†…**ï¼š
   - [x] åˆ›å»ºæ–°é¡¹ç›®
   - [x] æ‰¹é‡å¯¼å…¥50ä¸ªä»»åŠ¡
   - [x] å°†ä»»åŠ¡åˆ†é…ç»™å‘˜å·¥
   - [x] æŸ¥çœ‹é¡¹ç›®è¿›åº¦æ¦‚è§ˆ

2. **å‘˜å·¥å¯ä»¥åœ¨3æ­¥å†…**ï¼š
   - [x] æŸ¥çœ‹åˆ†é…çš„ä»»åŠ¡
   - [x] æ›´æ–°ä»»åŠ¡çŠ¶æ€
   - [x] è®°å½•å·¥ä½œæ—¶é—´

3. **ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡**ï¼š
   - [x] APIå“åº”æ—¶é—´ < 200ms
   - [x] ä»»åŠ¡çŠ¶æ€å®æ—¶åŒæ­¥ < 1ç§’
   - [x] æ”¯æŒ100+å¹¶å‘ç”¨æˆ·
   - [x] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

### ä»£ç è´¨é‡éªŒæ”¶
- [x] é›¶Flow Farmç›¸å…³ä»£ç æ®‹ç•™
- [x] æ‰€æœ‰APIéƒ½æœ‰é”™è¯¯å¤„ç†
- [x] ä»£ç æµ‹è¯•è¦†ç›–ç‡ > 80%
- [x] æ–‡æ¡£å®Œæ•´ä¸”å‡†ç¡®

### ç”¨æˆ·ä½“éªŒéªŒæ”¶
- [x] ç•Œé¢ç®€æ´ç›´è§‚
- [x] æ“ä½œæµç¨‹ç¬¦åˆä»»åŠ¡ç®¡ç†ä¹ æƒ¯
- [x] å“åº”å¼è®¾è®¡é€‚é…ä¸åŒå±å¹•
- [x] é”™è¯¯æç¤ºæ¸…æ™°å‹å¥½

---

## ğŸ“ æ”¯æŒå’Œé—®é¢˜åé¦ˆ

### å¼€å‘è¿‡ç¨‹ä¸­çš„é—®é¢˜
å¦‚æœåœ¨å®æ–½è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹å¯¹åº”é˜¶æ®µçš„è¯¦ç»†æ–‡æ¡£
2. è¿è¡Œ`cargo check`å’Œ`cargo test`æ£€æŸ¥ä»£ç çŠ¶æ€
3. æŸ¥çœ‹é¡¹ç›®çš„GitHub Issues
4. å‚è€ƒTaskFleetæ ¸å¿ƒæ–‡æ¡£ï¼š`docs/TaskFleet/`

### æ–‡æ¡£èµ„æº
- **æŠ€æœ¯å®ç°æŒ‡å—**: `docs/TaskFleet/01-TECHNICAL_GUIDE.md`
- **å¿«é€Ÿå¯åŠ¨æŒ‡å—**: `docs/TaskFleet/02-QUICK_START.md`  
- **é¡¹ç›®æ¦‚è§ˆ**: `docs/TaskFleet/00-PROJECT_OVERVIEW.md`
- **ç”¨æˆ·ä½¿ç”¨æŒ‡å—**: `docs/USER_GUIDE.md`

---

## ğŸš€ å¼€å§‹å®æ–½

### æ¨èçš„å®æ–½é¡ºåº
1. **ç«‹å³å¼€å§‹** - ç¬¬ä¸€é˜¶æ®µï¼šæ¸…ç†è¿‡æ—¶ä»£ç ï¼ˆæœ€é‡è¦ï¼‰
2. **é‡ç‚¹æŠ•å…¥** - ç¬¬äºŒé˜¶æ®µï¼šå®ç°ä»»åŠ¡åˆ†å‘åŠŸèƒ½ï¼ˆæ ¸å¿ƒä»·å€¼ï¼‰
3. **å¹¶è¡Œå¼€å‘** - ç¬¬ä¸‰ã€å››é˜¶æ®µï¼šå‰ç«¯å’Œæ¡Œé¢å®¢æˆ·ç«¯
4. **æ”¶å°¾ä¼˜åŒ–** - ç¬¬äº”é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–å’Œéƒ¨ç½²

### æ¯æ—¥å·¥ä½œå»ºè®®
- **Day 1-2**: å®Œæˆä»£ç æ¸…ç†ï¼Œç¡®ä¿ç¼–è¯‘é€šè¿‡
- **Day 3-5**: å®ç°åç«¯APIï¼Œé‡ç‚¹å…³æ³¨ä»»åŠ¡ç®¡ç†
- **Day 6-7**: å®ç°æ•°æ®ç»Ÿè®¡å’ŒWebSocketé€šä¿¡
- **Day 8-10**: é‡æ„å‰ç«¯ç•Œé¢ï¼Œå®ç°ä»»åŠ¡ç®¡ç†é¡µé¢
- **Day 11-13**: ä¼˜åŒ–æ¡Œé¢å®¢æˆ·ç«¯ï¼Œä¸“æ³¨å‘˜å·¥ä½“éªŒ
- **Day 14-15**: æ€§èƒ½ä¼˜åŒ–ã€æµ‹è¯•å’Œéƒ¨ç½²å‡†å¤‡

### é‡Œç¨‹ç¢‘æ£€æŸ¥ç‚¹
- **ç¬¬3å¤©**: èƒ½å¤Ÿåˆ›å»ºå’ŒæŸ¥è¯¢ä»»åŠ¡
- **ç¬¬7å¤©**: å®Œæ•´çš„ä»»åŠ¡ç®¡ç†APIå°±ç»ª
- **ç¬¬10å¤©**: Webå‰ç«¯ä»»åŠ¡ç®¡ç†åŠŸèƒ½å¯ç”¨
- **ç¬¬13å¤©**: æ¡Œé¢å®¢æˆ·ç«¯å‘˜å·¥åŠŸèƒ½å®Œæ•´
- **ç¬¬15å¤©**: å®Œæ•´çš„TaskFleetç³»ç»Ÿå¯éƒ¨ç½²

**ç¥æ‚¨çš„TaskFleeté¡¹ç›®å¼€å‘é¡ºåˆ©ï¼ğŸ‰**

---

*æœ€åæ›´æ–°: 2025å¹´10æœˆ28æ—¥*
*æ–‡æ¡£ç‰ˆæœ¬: v1.0*